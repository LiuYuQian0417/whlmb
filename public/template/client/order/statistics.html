{extend name='layout/frame' /}
{block name='mainCss'}
{__block__}
<link rel="stylesheet" type="text/css" href="__RES__/css/iconfont.css" />
<link rel="stylesheet" type="text/css" href="__RES__/css/font-awesome.min.css" />
<link rel="stylesheet" type="text/css" href="__RES__/css/general.css" />
<link rel="stylesheet" type="text/css" href="__RES__/css/style.css" />
<link rel="stylesheet" type="text/css" href="__RES__/css/purebox.css">
<link rel="stylesheet" type="text/css" href="__RES__/css/perfect-scrollbar.min.css">
<link rel="stylesheet" type="text/css" href="__RES__/css/calendar.min.css" />
<link rel="stylesheet" type="text/css" href="__RES__/css/spectrum.css" />
<link href="__RES__/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css">
{/block}
{block name='title'}{__block__}{/block}
{block name='body'}
{__block__}
<form action="" name="searchForm" class="layui-form" method="post">
    <div class="main-content" id="mainContent">
        <div class="ecsc-path"><span><!--商家管理-->报表 - - 订单统计</span></div>
        <div class="tabmenu">
            <ul class="tab">
                <li class="active"><a href="javascript:;">订单统计</a></li>

            </ul>
        </div>
        <div class="btn-info">
            <a class="sc-btn sc-blue-btn"
               href=""><i
                    class=""></i>订单统计报表下载</a>
        </div>
        <div class="clear"></div>
        <div class="order_stats">
            <div class="order_stats_top">
                <div class="order_stats_items">
                    <div class="order_stats_item order_stats_item2">
                        <i class="icon"><img src="__RES__/images/icon2.png"/></i>
                        <div class="desc">
                            <span class="tit">有效订单总金额</span>
                            <span class="value"><em>¥</em>0.00</span>
                        </div>
                    </div>
                    <div class="order_stats_item order_stats_item3">
                        <i class="icon"><img src="__RES__/images/icon3.png"/></i>
                        <div class="desc">
                            <span class="tit">总收藏数</span>
                            <span class="value">0</span>
                        </div>
                    </div>
                    <div class="order_stats_item order_stats_item4">
                        <i class="icon"><img src="__RES__/images/icon4.png"/></i>
                        <div class="desc">
                            <span class="tit">订单数</span>
                            <span class="value">0</span>
                        </div>
                    </div>
                    <div class="order_stats_item order_stats_item5">
                        <i class="icon"><img src="__RES__/images/icon5.png"/></i>
                        <div class="desc">
                            <span class="tit">总销量数</span>
                            <span class="value"><em>¥</em>0.00</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="order_stats_search">
                <!--起止时间开始-->
                <div class="screeItme">
                    <strong class="fl lh mr10">起始时间：</strong>
                    <div class="text_time" id="text_time1">
                        <input name="start_date" id="start_date" type="text" id="start_date" size="15" value="{:input('start_date','')}" readonly  class="text" />
                    </div>
                    <span class="bolang">&nbsp;&nbsp;~&nbsp;&nbsp;</span>
                    <div class="text_time" id="text_time2">
                        <input name="end_date" type="text" id="end_date" size="15" value="{:input('end_date','')}" readonly  class="text" />
                    </div>
                </div>
                <!--起止时间结束-->
            </div>
            <div class="main-content p0 mt20">
                <div class="tabmenu">
                    <ul class="tab">
                        <li class="active" id="order_circs-tab" data-tab="order_circs"><a
                                href="javascript:void(0);">订单概况</a></li>
                        <li id="shipping-tab" data-tab="shipping"><a href="javascript:void(0);">配送方式</a></li>
                        <li id="pay-tab" data-tab="pay"><a href="javascript:void(0);">支付方式 </a></li>
                        <li id="area-tab" data-tab="area"><a href="javascript:void(0);">地区分布</a></li>
                    </ul>
                </div>
                <div class="items-info">
                    <div class="wrapper-list">
                        <div id="order_main" style="height:378px;"></div>
                        <div id="order_main_price" style="height:378px;"></div>
                    </div>
                    <div class="wrapper-list" style="display:none;">
                        <div id="ship_main" style="width:970px; height:500px;"></div>
                    </div>
                    <div class="wrapper-list" style="display:none;">
                        <div id="pay_main" style="width:970px; height:500px;"></div>
                    </div>
                    <div class="wrapper-list" style="display:none;">
                        <div id="area_main" style="width:970px; height:500px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

{/block}
{block name='js'}
{__block__}
<script type="text/javascript" src="__RES__/js/seller.js"></script>
<script type="text/javascript" src="__RES__/js/calendar.min.js"></script>
<script type="text/javascript" src="__RES__/js/echarts-all.js"></script>

<script type="text/javascript">
    main.form();
</script>
<script type="text/javascript">
    //统计数据 start
    var is_multi = false;
    var order_data = {"order":{"title":{"text":"\u8ba2\u5355\u6570\u91cf","subtext":""},"series":[{"name":"\u8ba2\u5355\u4e2a\u6570","type":"line","itemStyle":{"normal":{"color":"#6cbd40","lineStyle":{"color":"#6cbd40"}}},"data":[0,0,0,0,0,0,0],"markPoint":{"itemStyle":{"normal":{"color":"#6cbd40"}},"data":[{"type":"max","name":"\u6700\u5927\u503c"},{"type":"min","name":"\u6700\u5c0f\u503c"}]}},{"type":"force","name":"","draggable":false,"nodes":{"draggable":false}}],"tooltip":{"trigger":"axis","axisPointer":{"lineStyle":{"color":"#6cbd40"}}},"legend":{"data":[]},"toolbox":{"show":true,"orient":"vertical","x":"right","y":"60","feature":{"magicType":{"show":true,"type":["line","bar"]},"saveAsImage":{"show":true}}},"calculable":true,"xAxis":{"type":"category","boundaryGap":false,"axisLine":{"lineStyle":{"color":"#ccc","width":0}},"data":["10-04","10-05","10-06","10-07","10-08","10-09","10-10"]},"yAxis":{"type":"value","axisLine":{"lineStyle":{"color":"#ccc","width":0}},"axisLabel":{"formatter":""},"formatter":"{value}\u4e2a"},"xy_file":[]},"sale":{"title":{"text":"\u9500\u552e\u989d","subtext":""},"series":[{"name":"\u9500\u552e\u989d","type":"line","itemStyle":{"normal":{"color":"#6cbd40","lineStyle":{"color":"#6cbd40"}}},"data":[0,0,0,0,0,0,0],"markPoint":{"itemStyle":{"normal":{"color":"#6cbd40"}},"data":[{"type":"max","name":"\u6700\u5927\u503c"},{"type":"min","name":"\u6700\u5c0f\u503c"}]}},{"type":"force","name":"","draggable":false,"nodes":{"draggable":false}}],"tooltip":{"trigger":"axis","axisPointer":{"lineStyle":{"color":"#6cbd40"}}},"legend":{"data":[]},"toolbox":{"show":true,"orient":"vertical","x":"right","y":"60","feature":{"magicType":{"show":true,"type":["line","bar"]},"saveAsImage":{"show":true}}},"calculable":true,"xAxis":{"type":"category","boundaryGap":false,"axisLine":{"lineStyle":{"color":"#ccc","width":0}},"data":["10-04","10-05","10-06","10-07","10-08","10-09","10-10"]},"yAxis":{"type":"value","axisLine":{"lineStyle":{"color":"#ccc","width":0}},"axisLabel":{"formatter":""},"formatter":"{value}\u5143"},"xy_file":[]}};
    var ship_data = [];
    var pay_data = [];
    var area_data = [];

    var myChart_order = echarts.init(document.getElementById("order_main"));
    var myChart_ship = echarts.init(document.getElementById("ship_main"));
    var myChart_pay = echarts.init(document.getElementById("pay_main"));
    var myChart_area = echarts.init(document.getElementById("area_main"));
    var myChart_price = echarts.init(document.getElementById("order_main_price"));

    if(is_multi){
        //订单概况
        var option_order = {
            title : {
                text: '订单概况',
                subtext: ''
            },
            tooltip : {
                trigger: 'axis'
            },
            legend: {
                data:['已确认','已成交',"未确认","无效或取消"]
            },
            toolbox: {
                show : true,
                feature : {
                    magicType : {show: true, type: ['line', 'bar']},
                    restore : {show: true},
                    saveAsImage : {show: true}
                }
            },
            calculable : true,
            xAxis : [
                {
                    type : 'category',
                    data : order_data[0]
                }
            ],
            yAxis : [
                {
                    type : 'value'
                }
            ],
            series : [
                {
                    name:'已确认',
                    type:'bar',
                    data:order_data[1],
                    markPoint : {
                        data : [
                            {type : 'max', name: '最大值'},
                            {type : 'min', name: '最小值'}
                        ]
                    },
                    markLine : {
                        data : [
                            {type : 'average', name: '平均值'}
                        ]
                    }
                },
                {
                    name:'已成交',
                    type:'bar',
                    data:order_data[2],
                    markPoint : {
                        data : [
                            {type : 'max', name: '最大值'},
                            {type : 'min', name: '最小值'}
                        ]
                    },
                    markLine : {
                        data : [
                            {type : 'average', name : '平均值'}
                        ]
                    }
                },
                {
                    name:'未确认',
                    type:'bar',
                    data:order_data[3],
                    markPoint : {
                        data : [
                            {type : 'max', name: '最大值'},
                            {type : 'min', name: '最小值'}
                        ]
                    },
                    markLine : {
                        data : [
                            {type : 'average', name : '平均值'}
                        ]
                    }
                },
                {
                    name:'无效或取消',
                    type:'bar',
                    data:order_data[4],
                    markPoint : {
                        data : [
                            {type : 'max', name: '最大值'},
                            {type : 'min', name: '最小值'}
                        ]
                    },
                    markLine : {
                        data : [
                            {type : 'average', name : '平均值'}
                        ]
                    }
                }
            ]
        };
    }else{

    }

    //配送方式
    option_ship = {
        title : {
            text: '配送方式',
            subtext: '',
        },
        tooltip : {
            trigger: 'item',
            formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        legend: {
            data: ship_data[0]
        },
        series : [
            {
                name: '访问来源',
                type: 'pie',
                radius : '55%',
                center: ['50%', '60%'],
                data: ship_data[1],
                itemStyle: {
                    emphasis: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };

    //支付方式
    option_pay = {
        title : {
            text: '支付方式',
            subtext: '',
        },
        tooltip : {
            trigger: 'item',
            formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        legend: {
            data: pay_data[0]
        },
        series : [
            {
                name: '访问来源',
                type: 'pie',
                radius : '55%',
                center: ['50%', '60%'],
                data: pay_data[1],
                itemStyle: {
                    emphasis: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };

    //配送地区
    option_area = {
        title : {
            text: '配送地区',
            subtext: '',
        },
        tooltip : {
            trigger: 'item',
            formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        legend: {
            data: area_data[0]
        },
        series : [
            {
                name: '访问来源',
                type: 'pie',
                radius : '55%',
                center: ['50%', '60%'],
                data: area_data[1],
                itemStyle: {
                    emphasis: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };

    if(is_multi){
        //订单概况
        myChart_order.setOption(option_order);
    }else{
        //订单概况
        myChart_order.setOption(order_data['order']);
        myChart_price.setOption(order_data['sale']);
    }
    //配送方式
    myChart_ship.setOption(option_ship);
    //支付方式
    myChart_pay.setOption(option_pay);
    //配送地区
    myChart_area.setOption(option_area);
    //统计数据 end

    //日期选择插件调用start sunle
    var opts1 = {
        'targetId':'start_date',//时间写入对象的id
        'triggerId':['start_date'],//触发事件的对象id
        'alignId':'text_time1',//日历对齐对象
        'format':'-'//时间格式 默认'YYYY-MM-DD HH:MM:SS'
    },opts2 = {
        'targetId':'end_date',
        'triggerId':['end_date'],
        'alignId':'text_time2',
        'format':'-'
    }

    xvDate(opts1);
    xvDate(opts2);
    //日期选择插件调用end sunle

    //-->
</script>
{/block}
